import{c as classesToSelector}from"../shared/classes-to-selector.min.mjs";import{c as createElement,h as elementIndex,m as makeElementsArray}from"../shared/utils.min.mjs";function A11y(e){let{swiper:a,extendParams:t,on:n}=e;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),a.a11y={clicked:!1};let i=null;function s(e){const a=i;0!==a.length&&(a.innerHTML="",a.innerHTML=e)}function r(e){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("tabIndex","0")}))}function l(e){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("tabIndex","-1")}))}function o(e,a){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("role",a)}))}function c(e,a){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-roledescription",a)}))}function d(e,a){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-label",a)}))}function p(e){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-disabled",!0)}))}function m(e){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-disabled",!1)}))}function g(e){if(13!==e.keyCode&&32!==e.keyCode)return;const t=a.params.a11y,n=e.target;a.pagination&&a.pagination.el&&(n===a.pagination.el||a.pagination.el.contains(e.target))&&!e.target.matches(classesToSelector(a.params.pagination.bulletClass))||(a.navigation&&a.navigation.nextEl&&n===a.navigation.nextEl&&(a.isEnd&&!a.params.loop||a.slideNext(),a.isEnd?s(t.lastSlideMessage):s(t.nextSlideMessage)),a.navigation&&a.navigation.prevEl&&n===a.navigation.prevEl&&(a.isBeginning&&!a.params.loop||a.slidePrev(),a.isBeginning?s(t.firstSlideMessage):s(t.prevSlideMessage)),a.pagination&&n.matches(classesToSelector(a.params.pagination.bulletClass))&&n.click())}function u(){return a.pagination&&a.pagination.bullets&&a.pagination.bullets.length}function E(){return u()&&a.params.pagination.clickable}const f=(e,a,t)=>{r(e),"BUTTON"!==e.tagName&&(o(e,"button"),e.addEventListener("keydown",g)),d(e,t),function(e,a){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-controls",a)}))}(e,a)},v=()=>{a.a11y.clicked=!0},b=()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{a.destroyed||(a.a11y.clicked=!1)}))}))},y=e=>{if(a.a11y.clicked)return;const t=e.target.closest(`.${a.params.slideClass}, swiper-slide`);if(!t||!a.slides.includes(t))return;const n=a.slides.indexOf(t)===a.activeIndex,i=a.params.watchSlidesProgress&&a.visibleSlides&&a.visibleSlides.includes(t);n||i||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(a.isHorizontal()?a.el.scrollLeft=0:a.el.scrollTop=0,a.slideTo(a.slides.indexOf(t),0))},h=()=>{const e=a.params.a11y;e.itemRoleDescriptionMessage&&c(a.slides,e.itemRoleDescriptionMessage),e.slideRole&&o(a.slides,e.slideRole);const t=a.slides.length;e.slideLabelMessage&&a.slides.forEach(((n,i)=>{const s=a.params.loop?parseInt(n.getAttribute("data-swiper-slide-index"),10):i;d(n,e.slideLabelMessage.replace(/\{\{index\}\}/,s+1).replace(/\{\{slidesLength\}\}/,t))}))},A=()=>{const e=a.params.a11y;a.el.append(i);const t=a.el;e.containerRoleDescriptionMessage&&c(t,e.containerRoleDescriptionMessage),e.containerMessage&&d(t,e.containerMessage);const n=a.wrapperEl,s=e.id||n.getAttribute("id")||`swiper-wrapper-${r=16,void 0===r&&(r=16),"x".repeat(r).replace(/x/g,(()=>Math.round(16*Math.random()).toString(16)))}`;var r;const l=a.params.autoplay&&a.params.autoplay.enabled?"off":"polite";var o;o=s,makeElementsArray(n).forEach((e=>{e.setAttribute("id",o)})),function(e,a){(e=makeElementsArray(e)).forEach((e=>{e.setAttribute("aria-live",a)}))}(n,l),h();let{nextEl:p,prevEl:m}=a.navigation?a.navigation:{};if(p=makeElementsArray(p),m=makeElementsArray(m),p&&p.forEach((a=>f(a,s,e.nextSlideMessage))),m&&m.forEach((a=>f(a,s,e.prevSlideMessage))),E()){makeElementsArray(a.pagination.el).forEach((e=>{e.addEventListener("keydown",g)}))}a.el.addEventListener("focus",y,!0),a.el.addEventListener("pointerdown",v,!0),a.el.addEventListener("pointerup",b,!0)};n("beforeInit",(()=>{i=createElement("span",a.params.a11y.notificationClass),i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true")})),n("afterInit",(()=>{a.params.a11y.enabled&&A()})),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",(()=>{a.params.a11y.enabled&&h()})),n("fromEdge toEdge afterInit lock unlock",(()=>{a.params.a11y.enabled&&function(){if(a.params.loop||a.params.rewind||!a.navigation)return;const{nextEl:e,prevEl:t}=a.navigation;t&&(a.isBeginning?(p(t),l(t)):(m(t),r(t))),e&&(a.isEnd?(p(e),l(e)):(m(e),r(e)))}()})),n("paginationUpdate",(()=>{a.params.a11y.enabled&&function(){const e=a.params.a11y;u()&&a.pagination.bullets.forEach((t=>{a.params.pagination.clickable&&(r(t),a.params.pagination.renderBullet||(o(t,"button"),d(t,e.paginationBulletMessage.replace(/\{\{index\}\}/,elementIndex(t)+1)))),t.matches(classesToSelector(a.params.pagination.bulletActiveClass))?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}))}()})),n("destroy",(()=>{a.params.a11y.enabled&&function(){i&&i.remove();let{nextEl:e,prevEl:t}=a.navigation?a.navigation:{};e=makeElementsArray(e),t=makeElementsArray(t),e&&e.forEach((e=>e.removeEventListener("keydown",g))),t&&t.forEach((e=>e.removeEventListener("keydown",g))),E()&&makeElementsArray(a.pagination.el).forEach((e=>{e.removeEventListener("keydown",g)}));a.el.removeEventListener("focus",y,!0),a.el.removeEventListener("pointerdown",v,!0),a.el.removeEventListener("pointerup",b,!0)}()}))}export{A11y as default};
//# sourceMappingURL=a11y.min.mjs.map